
import tkinter as tk
from tkinter import messagebox

def register():
    username = entry_reg_username.get()
    password = entry_reg_password.get()
    with open("registered_users.txt", "a") as file:
        file.write(f"{username}:{password}\n")
        messagebox.showinfo("Регистрация успешна",
                                "Регистрация прошла успешно. Пожалуйста, войдите с вашим именем и паролем.")

def login():
    username = entry_login_username.get()
    password = entry_login_password.get()
    with open("registered_users.txt", "r") as file:
        for line in file:
            stored_username, stored_password = line.strip().split(":")
            if username == stored_username and password == stored_password:
                status_label.config(text="Вход успешен")
                return
    messagebox.showerror("Ошибка", "Неверное имя пользователя или пароль")

# Создаем главное окно
root = tk.Tk()
root.title("Регистрация и Вход")

# Окно регистрации
frame_register = tk.Frame(root)
frame_register.pack(pady=10)

label_reg_username = tk.Label(frame_register, text="Имя пользователя:")
label_reg_username.grid(row=0, column=0)
entry_reg_username = tk.Entry(frame_register)
entry_reg_username.grid(row=0, column=1)

label_reg_password = tk.Label(frame_register, text="Пароль:")
label_reg_password.grid(row=1, column=0)
entry_reg_password = tk.Entry(frame_register, show="*")
entry_reg_password.grid(row=1, column=1)

register_button = tk.Button(frame_register, text="Зарегистрироваться", command=register)
register_button.grid(row=2, columnspan=2)


# Окно входа
frame_login = tk.Frame(root)
frame_login.pack(pady=10)

label_login_username = tk.Label(frame_login, text="Имя пользователя:")
label_login_username.grid(row=0, column=0)
entry_login_username = tk.Entry(frame_login)
entry_login_username.grid(row=0, column=1)

label_login_password = tk.Label(frame_login, text="Пароль:")
label_login_password.grid(row=1, column=0)
entry_login_password = tk.Entry(frame_login, show="*")
entry_login_password.grid(row=1, column=1)

login_button = tk.Button(frame_login, text="Войти", command=login)
login_button.grid(row=2, columnspan=2)

# Статус
status_label = tk.Label(root, text="", fg="green")
status_label.pack(pady=10)

# Запускаем цикл обработки событий
root.mainloop()
